!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["vue-table-scroll"]=e(t.Vue)}(this,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=e(t),n=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var s=n[i];t.call(e,s[1],s[0])}},e}()}(),s="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),r="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],h="undefined"!=typeof MutationObserver,l=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,s=0;function o(){i&&(i=!1,t()),n&&h()}function a(){r(o)}function h(){var t=Date.now();if(i){if(t-s<2)return;n=!0}else i=!0,n=!1,setTimeout(a,e);s=t}return h}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){s&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),h?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){s&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;a.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),u=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},c=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||o},d=m(0,0,0,0);function M(t){return parseFloat(t)||0}function p(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+M(t["border-"+i+"-width"])}),0)}function f(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return d;var n=c(t).getComputedStyle(t),s=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var s=n[i],o=t["padding-"+s];e[s]=M(o)}return e}(n),o=s.left+s.right,r=s.top+s.bottom,a=M(n.width),h=M(n.height);if("border-box"===n.boxSizing&&(Math.round(a+o)!==e&&(a-=p(n,"left","right")+o),Math.round(h+r)!==i&&(h-=p(n,"top","bottom")+r)),!function(t){return t===c(t).document.documentElement}(t)){var l=Math.round(a+o)-e,u=Math.round(h+r)-i;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(h-=u)}return m(s.left,s.top,a,h)}var g="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof c(t).SVGGraphicsElement}:function(t){return t instanceof c(t).SVGElement&&"function"==typeof t.getBBox};function y(t){return s?g(t)?function(t){var e=t.getBBox();return m(0,0,e.width,e.height)}(t):f(t):d}function m(t,e,i,n){return{x:t,y:e,width:i,height:n}}var T=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=y(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),b=function(t,e){var i,n,s,o,r,a,h,l=(n=(i=e).x,s=i.y,o=i.width,r=i.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,h=Object.create(a.prototype),u(h,{x:n,y:s,width:o,height:r,top:s,right:n+o,bottom:r+s,left:n}),h);u(this,{target:t,contentRect:l})},v=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new T(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof c(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new b(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),j="undefined"!=typeof WeakMap?new WeakMap:new n,N=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=l.getInstance(),n=new v(e,i,this);j.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){N.prototype[t]=function(){var e;return(e=j.get(this))[t].apply(e,arguments)}}));var L=void 0!==o.ResizeObserver?o.ResizeObserver:N;function _(t,e,i){var n,s=i||{},o=s.noTrailing,r=void 0!==o&&o,a=s.noLeading,h=void 0!==a&&a,l=s.debounceMode,u=void 0===l?void 0:l,c=!1,d=0;function M(){n&&clearTimeout(n)}function p(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];var a=this,l=Date.now()-d;function p(){d=Date.now(),e.apply(a,s)}function f(){n=void 0}c||(h||!u||n||p(),M(),void 0===u&&l>t?h?d=Date.now():p():!0!==r&&(n=setTimeout(u?f:p,void 0===u?t-l:t)))}return p.cancel=function(){M(),c=!0},p}function D(t,e,i){return void 0===i?_(t,e,{debounceMode:!1}):_(t,i,{debounceMode:!1!==e})}const I="undefined"==typeof window,w=function(t){for(let e of t){const t=e.target.__resizeListeners__||[];t.length&&t.forEach((t=>{t()}))}};var E={computed:{tableLayout(){let t;if(this.table&&(t=this.table||this.table.$parent),!t)throw new Error("Can not find table");return t}},mounted(){this.onColumnsChange(this.tableLayout)},updated(){this.onColumnsChange(this.tableLayout)},methods:{onColumnsChange(t){var e;const i=t.store.tableHeader,n=this.$el.querySelectorAll("colgroup > col");if(n.length)for(let s=t.mergeOption.index?1:0,o=n.length;s<o;s++){const t=n[s];t.getAttribute("name")&&t.setAttribute("width",null==(e=i[s])?void 0:e.width)}}}};function O(t){return t=t?parseInt(t,10):0}var C={name:"TableBody",mixins:[E],props:{store:{required:!0}},data:()=>({tooltipContent:"",tipStyle:"",tableData:[],arrowStyle:"",yPos:0,realBoxHeight:0}),computed:{table(){return this.$parent},pos(){return{transform:`translateY(${this.yPos}px)`,transition:"all ease-in 0",overflow:"hidden"}},defaultOption:()=>({step:1,singleStep:6,hoverStop:!0,singleHeight:48,singleStepMove:!1,delayTime:2e3,waitTime:2e3}),options(){return Object.assign({},this.defaultOption,this.tableLayout.options)},hoverStopSwitch(){return this.options.hoverStop},singleStep(){let t=this.options.singleStep;this.options.singleHeight;return t}},watch:{"store.tableData":{immediate:!0,handler(t,e){(null==t?void 0:t.length)>0&&e!==t&&(this.tableData=t.slice(0))}}},beforeCreate(){this.VM=null,this.reqFrame=null,this.singleWaitTime=null,this.isHover=!1,this.isStart=!1},mounted(){this.init()},beforeDestroy(){this.cancle(),this.VM&&this.VM.$destroy(),this.singleWaitTime&&clearTimeout(this.singleWaitTime)},methods:{init(){const t=this.$parent.mergeOption.bodyHeight;if(this.$el.offsetHeight>t){this.tableData.push(...this.store.tableData),this.isStart=!0;let t=setTimeout((()=>{this.initMove(),clearTimeout(t)}),this.options.delayTime)}else this.isStart=!1},handleCellMouseEnter(t){if(!this.table.mergeOption.showTip)return;const e=t.target,i=e.querySelector(".cell"),n=document.createRange();n.setStart(i,0),n.setEnd(i,i.childNodes.length);const s=n.getBoundingClientRect().width;if(s>i.offsetWidth){this.VM||this.createTooltip();let i=this.getOffsetTop(n);const{offsetLeft:o,arrowOffsetLeft:r}=this.getOffsetLeft(n,t,s);this.VM.$el.style.display="",this.tooltipContent=e.innerText||e.textContent,this.tipStyle=`z-index: 9999;position:fixed; left: ${o}px; top: ${i}px;`,this.arrowStyle=`left: ${r}px`}},createTooltip(){this.$createElement;const t=this;this.VM=new i.default({render(){const e=arguments[0];return e("div",{attrs:{"x-placement":"bottom"},ref:"tooltip",class:"el-tooltip__popper is-dark",style:t.tipStyle},[t.tooltipContent,e("div",{class:"popper__arrow",style:t.arrowStyle})])}}).$mount(),document.getElementsByTagName("body")[0].appendChild(this.VM.$el)},getOffsetTop:t=>t.getBoundingClientRect().top+35,getOffsetLeft(t,e,i){const n=t.getBoundingClientRect().left,s=n-O((i-e.target.clientWidth)/2);return{offsetLeft:s<0?0:s,arrowOffsetLeft:s<0?n+e.target.clientWidth/2:i/2}},handleCellMouseLeave(){this.VM&&(this.VM.$el.style.display="none")},reset(){this.cancle(),this.initMove()},cancle(){cancelAnimationFrame(this.reqFrame||"")},move(){this.isHover||(this.cancle(),this.reqFrame=requestAnimationFrame((()=>{const t=this.realBoxHeight/2;let{step:e}=this.options;Math.abs(this.yPos)>=t&&(this.yPos=0),this.yPos-=e,this.move()})))},singleMove(){this.isHover||(this.cancle(),this.reqFrame=requestAnimationFrame((()=>{const t=this.realBoxHeight/2;let{waitTime:e,singleStep:i,singleHeight:n}=this.options;Math.abs(this.yPos)>=t&&(this.yPos=0),this.yPos-=i,this.singleWaitTime&&clearTimeout(this.singleWaitTime),Math.abs(this.yPos)%n<i?this.singleWaitTime=setTimeout((()=>{this.singleMove()}),e):this.singleMove()})))},initMove(){this.$nextTick((()=>{if(this.isStart){let t=setTimeout((()=>{this.realBoxHeight=this.$refs.realBox.offsetHeight,this.options.singleStepMove?this.singleMove():this.move(),clearTimeout(t)}),0)}else this.cancle(),this.yPos=0}))},startMove(){this.isHover=!1,this.isStart&&(this.options.singleStepMove?this.singleMove():this.move())},stopMove(){this.isHover=!0,this.singleWaitTime&&clearTimeout(this.singleWaitTime),this.cancle()}},render(){const t=arguments[0],e=this.store.tableHeader,i=this.tableData,n=this.realBoxHeight/2,{index:s,showTip:o}=this.table.mergeOption,r=this.table.bodyWidth,a=this.table,h=this.pos,l=()=>{this.yPos>0&&(this.yPos=-n),this.yPos+=20},u=()=>{Math.abs(this.yPos)>=n&&(this.yPos=0),this.yPos-=20};return t("div",{ref:"wrap"},[t("div",{class:"realBox",ref:"realBox",style:h,on:{mousewheel:t=>{this.isStart&&D(10,(()=>{t.wheelDelta>0?l():u()}))()},mouseenter:()=>{this.hoverStopSwitch&&this.stopMove()},mouseleave:()=>{this.hoverStopSwitch&&this.startMove()}}},[t("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"},style:`width:${r}px`},[t("colgroup",[s&&t("col",{attrs:{name:"column_0",width:"50"}}),e.map(((e,i)=>!e.hidden&&t("col",{attrs:{name:`column_${i+1}`}})))]),t("tbody",[i.map(((i,n)=>t("tr",{on:{click:()=>{return t=i,void a.$emit("lineClick",t);var t}}},[s&&t("td",{class:["el-table__cell","is-center"]},[t("div",{class:["cell"]},[n+1])]),e.map((e=>!e.hidden&&t("td",{class:["el-table__cell","is-center"],on:{mouseenter:t=>this.handleCellMouseEnter(t),mouseleave:this.handleCellMouseLeave}},[t("div",{class:o?["cell","el-tooltip"]:["cell"]},[i[e.prop]])])))])))])])])])}},x={name:"TableHeader",mixins:[E],props:{store:{required:!0}},computed:{table(){return this.$parent}},render(){const t=arguments[0],e=this.store.tableHeader,i=this.table.mergeOption.index;return t("table",{class:"el-table_header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t("colgroup",[i&&t("col",{attrs:{name:"column_0",width:"50"}}),e.map(((e,i)=>!e.hidden&&t("col",{attrs:{name:`column_${i+1}`}})))]),t("thead",{class:["is-group"]},[t("tr",[i&&t("th",{class:["el-table__cell","is-center"]},["序号"]),e.map((e=>!e.hidden&&t("th",{attrs:{colspan:e.colSpan,rowspan:e.rowSpan},key:e.id,class:["el-table__cell","is-center"]},[t("div",{class:["cell"]},[e.label])])))])])])}};function z(t,e,i,n,s,o,r,a){var h,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),r?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=h):s&&(h=a?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),h)if(l.functional){l._injectStyles=h;var u=l.render;l.render=function(t,e){return h.call(e),u(t,e)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,h):[h]}return{exports:t,options:l}}const S={};var A=z({},(function(){var t=this;t.$createElement;return t._self._c,t._m(0)}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty",staticStyle:{width:"100%","text-align":"center"}},[i("img",{staticStyle:{width:"150px","margin-top":"20px"},attrs:{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEwMi40IDg5NmE0MDkuNiA1MS4yIDAgMSAwIDgxOS4yIDAgNDA5LjYgNTEuMiAwIDEgMC04MTkuMiAwWiIgZmlsbD0iIzRBNjhDQyIgb3BhY2l0eT0iLjEiIC8+PHBhdGggZD0iTTExNi43MzYgMzc2LjgzMmMwIDguNzA0IDYuNjU2IDE1LjM2IDE1LjM2IDE1LjM2czE1LjM2LTYuNjU2IDE1LjM2LTE1LjM2LTYuNjU2LTE1LjM2LTE1LjM2LTE1LjM2Yy04LjE5MiAwLTE1LjM2IDcuMTY4LTE1LjM2IDE1LjM2ek05MjYuNzIgODMyYy0xOS40NTYgNS4xMi0yMy41NTIgOS4yMTYtMjguMTYgMjguMTYtNS4xMi0xOS40NTYtOS4yMTYtMjMuNTUyLTI4LjE2LTI4LjE2IDE4Ljk0NC01LjEyIDIzLjU1Mi05LjIxNiAyOC4xNi0yOC4xNiA0LjYwOCAxOC45NDQgOC43MDQgMjMuNTUyIDI4LjE2IDI4LjE2ek0yMDIuMjQgMzIzLjA3MmMtMjUuMDg4IDYuNjU2LTMwLjIwOCAxMS43NzYtMzYuODY0IDM2Ljg2NC02LjY1Ni0yNS4wODgtMTEuNzc2LTMwLjIwOC0zNi44NjQtMzYuODY0IDI1LjA4OC02LjY1NiAzMC4yMDgtMTIuMjg4IDM2Ljg2NC0zNi44NjQgNi4xNDQgMjUuMDg4IDExLjc3NiAzMC4yMDggMzYuODY0IDM2Ljg2NHpNODE2LjY0IDIzNS4wMDhjLTE1LjM2IDQuMDk2LTE4LjQzMiA3LjE2OC0yMi41MjggMjIuNTI4LTQuMDk2LTE1LjM2LTcuMTY4LTE4LjQzMi0yMi41MjgtMjIuNTI4IDE1LjM2LTQuMDk2IDE4LjQzMi03LjE2OCAyMi41MjgtMjIuNTI4IDMuNTg0IDE1LjM2IDcuMTY4IDE4LjQzMiAyMi41MjggMjIuNTI4ek04ODIuNjg4IDE1Ni4xNmMtMzkuOTM2IDEwLjI0LTQ4LjEyOCAxOC45NDQtNTguODggNTguODgtMTAuMjQtMzkuOTM2LTE4Ljk0NC00OC4xMjgtNTguODgtNTguODggMzkuOTM2LTEwLjI0IDQ4LjEyOC0xOC45NDQgNTguODgtNTguODggMTAuMjQgMzkuNDI0IDE4Ljk0NCA0OC4xMjggNTguODggNTguODh6IiBmaWxsPSIjNEE2OENDIiBvcGFjaXR5PSIuNSIgLz48cGF0aCBkPSJNNDE5Ljg0IDcxMy4yMTZ2NC4wOTZsMzMuNzkyIDMxLjIzMiAxMjkuNTM2LTYyLjk3Nkw0NjUuOTIgNzYwLjgzMnYzNi44NjRsMTguOTQ0LTE4LjQzMnYtMC41MTIgMC41MTJsMTguOTQ0IDE4LjQzMiAxMDAuMzUyLTEyMi44OHYtNC4wOTZ6IiBmaWxsPSIjNEE2OENDIiBvcGFjaXR5PSIuMiIgLz48cGF0aCBkPSJNODYwLjE2IDU1MS45MzZ2LTEuMDI0YzAtMS4wMjQtMC41MTItMS41MzYtMC41MTItMi41NnYtMC41MTJsLTExMC4wOC0yODcuMjMyYy0xNS44NzItNDguNjQtNjAuOTI4LTgxLjQwOC0xMTIuMTI4LTgxLjQwOEgzODcuMDcyYy01MS4yIDAtOTYuMjU2IDMyLjc2OC0xMTIuMTI4IDgxLjQwOEwxNjQuODY0IDU0Ny44NHYwLjUxMmMtMC41MTIgMS4wMjQtMC41MTIgMS41MzYtMC41MTIgMi41NlY3NTcuNzZjMCA2NS4wMjQgNTIuNzM2IDExNy43NiAxMTcuNzYgMTE3Ljc2aDQ2MC44YzY1LjAyNCAwIDExNy43Ni01Mi43MzYgMTE3Ljc2LTExNy43NnYtMjA0LjhjLTAuNTEyLTAuNTEyLTAuNTEyLTAuNTEyLTAuNTEyLTEuMDI0ek0zMDMuNjE2IDI3MS4zNnMwLTAuNTEyIDAuNTEyLTAuNTEyQzMxNS4zOTIgMjMzLjk4NCAzNDkuMTg0IDIwOS45MiAzODcuMDcyIDIwOS45MmgyNDkuODU2YzM3Ljg4OCAwIDcxLjY4IDI0LjA2NCA4My40NTYgNjAuNDE2IDAgMCAwIDAuNTEyIDAuNTEyIDAuNTEybDEwMS44ODggMjY2LjI0SDU4OC44Yy04LjcwNCAwLTE1LjM2IDYuNjU2LTE1LjM2IDE1LjM2IDAgMzMuNzkyLTI3LjY0OCA2MS40NC02MS40NCA2MS40NHMtNjEuNDQtMjcuNjQ4LTYxLjQ0LTYxLjQ0YzAtOC43MDQtNi42NTYtMTUuMzYtMTUuMzYtMTUuMzZIMjAxLjcyOEwzMDMuNjE2IDI3MS4zNnpNODI5LjQ0IDc1Ny43NmMwIDQ4LjEyOC0zOC45MTIgODcuMDQtODcuMDQgODcuMDRIMjgxLjZjLTQ4LjEyOCAwLTg3LjA0LTM4LjkxMi04Ny4wNC04Ny4wNHYtMTg5LjQ0aDIyNi44MTZjNy4xNjggNDMuNTIgNDUuMDU2IDc2LjggOTAuNjI0IDc2LjhzODMuNDU2LTMzLjI4IDkwLjYyNC03Ni44SDgyOS40NHYxODkuNDR6IiBmaWxsPSIjNEE2OENDIiBvcGFjaXR5PSIuNSIgLz48cGF0aCBkPSJNNTEyIDU3OC41NmMtMTQuMzM2IDAtMjUuNi0xMS4yNjQtMjUuNi0yNS42VjUwMS43NkgyNTMuNDRsODMuOTY4LTIxOS4xMzYgMC41MTItMS4wMjRjNy4xNjgtMjEuNTA0IDI2LjYyNC0zNS44NCA0OS4xNTItMzUuODRoMjQ5Ljg1NmMyMi41MjggMCA0MS45ODQgMTQuMzM2IDQ5LjE1MiAzNS44NGwwLjUxMiAxLjAyNEw3NzAuNTYgNTAxLjc2SDUzNy42djUxLjJjMCAxNC4zMzYtMTEuMjY0IDI1LjYtMjUuNiAyNS42eiIgZmlsbD0iIzRBNjhDQyIgb3BhY2l0eT0iLjIiIC8+PC9zdmc+"}}),i("p",[t._v("暂无数据")])])}],!1,Y,null,null,null);function Y(t){for(let e in S)this[e]=S[e]}const Q={};var H=z({name:"TableScroll",components:{TableHeader:x,TableBody:C,ImgEmpty:function(){return A.exports}()},props:{tableHeader:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){return{}}}},data(){return{store:{tableHeader:[],tableData:[],table:this},updateKey:0,tableHeaderData:[],tableBodyData:[],bodyWidth:"",isEmpty:!0}},computed:{defaultOptions:()=>({bodyHeight:300,index:!1,showTip:!0}),mergeOption(){return Object.assign({},this.defaultOptions,this.options)},bodyWrapper(){return this.$refs.headerWrapper},parentWidth(){const t=this.bodyWidth;return this.initData(),t}},watch:{tableHeader:{immediate:!0,handler(t){this.tableHeaderData=t}},tableData:{immediate:!0,handler(t,e){(null==t?void 0:t.length)>0&&e!==t?(this.isEmpty=!1,this.updateKey++,this.tableBodyData=t):this.isEmpty=!0}}},mounted(){this.bindEvents(),this.updateColumnsWidth(),this.updateColumns(this.bodyWidth),this.$ready=!0},destroyed(){this.unbindEvents()},methods:{initData(){this.store.tableData=this.tableBodyData,this.store.tableHeader=this.tableHeaderData.filter((t=>!t.hidden))},bindEvents(){var t,e;t=this.$el,e=this.resizeListener,I||(t.__resizeListeners__||(t.__resizeListeners__=[],t.__ro__=new L(D(16,w)),t.__ro__.observe(t)),t.__resizeListeners__.push(e))},unbindEvents(){var t,e;t=this.$el,e=this.resizeListener,t&&t.__resizeListeners__&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||t.__ro__.disconnect())},resizeListener(){this.$ready&&this.updateColumnsWidth()},updateColumnsWidth(){this.bodyWidth=this.$el.clientWidth},updateColumns(t){t=t||this.$el.clientWidth;let e=this.tableHeaderData.filter((t=>!t.hidden)),i=this.mergeOption.index?50:0,n=0,s=0;for(let a=0;a<e.length;a++)e[a].width&&(n+=O(e[a].width),O(e[a].width)&&s++);const o=O((t-n-i)/(e.length-s)),r=this.store.tableHeader=e;r.forEach(((t,e)=>{t.width||this.$set(r[e],"width",o)}))}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-table"},[i("div",{ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[i("table-header",{ref:"tableHeader",style:{width:t.parentWidth?t.parentWidth+"px":""},attrs:{store:t.store}})],1),i("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",style:"height: "+t.mergeOption.bodyHeight+"px;"},[t.isEmpty?i("img-empty"):i("table-body",{key:t.updateKey,ref:"tableBody",style:{width:t.parentWidth?t.parentWidth+"px":""},attrs:{store:t.store}})],1)])}),[],!1,k,null,null,null);function k(t){for(let e in Q)this[e]=Q[e]}var B=function(){return H.exports}();return B.install=(t,e={})=>{t.component(e.componentName||B.name,B)},"undefined"!=typeof window&&window.Vue&&Vue.component(B.name,B),B}));
